{"version":3,"names":[],"mappings":"","sources":["IRColumnsGroup.js"],"sourcesContent":["const IRColumnGroups = function() {\r\n\tlet report = {};\r\n\tasync function init() {\r\n\t\tconst ajaxCallback = this.action.ajaxIdentifier;\r\n\t\treport.id = this.action.attribute01;\r\n\t\tconsole.log('Initing IRColumnsGroup for', \"#\"+report.id);\r\n\t\tvar args = { x01: report.id };\r\n\t\tvar columnGroups = await apex.server.plugin(ajaxCallback, args,{dataType:\"\"});\r\n\t\tgroupedCols = groupColumns(columnGroups);\r\n\t\tcreateGroupsHTML(groupedCols);\r\n\t}\r\n\r\n\tfunction groupColumns(ungroupedData) {\r\n\t\tlet groupCols = [];\r\n\t\tungroupedData.map(function(data) {\r\n\t\t\tlet i = groupCols.map(group => { return group.group }).indexOf(data.group);\r\n\t\t\tif (i < 0) groupCols.push({group:data.group, columns:[data.column]})\r\n\t\t\telse groupCols[i].columns.push(data.column);\r\n\t\t});\r\n\t\treturn groupCols;\r\n\t}\r\n\r\n\tfunction createGroupsHTML(groupCols) {\r\n\t\tvar $tr = $(\"<tr></tr>\");\r\n\t\tvar lastIndex = 1;\r\n\t\tgroupCols.map(thisGroup => {\r\n\t\t\tvar i = 1;\r\n\t\t\tvar firstGroupColumn = thisGroup.columns[0];\r\n\t\t\t$(`#${report.id} .t-fht-thead .a-IRR-header`)\r\n\t\t\t.each(function(){\r\n\t\t\t\tlet $th = $(this);\r\n\t\t\t\tvar $header = $th.find(\".a-IRR-headerLink\").length ?\r\n\t\t\t\t\t\t\t\t\t\t\t$th.find(\".a-IRR-headerLink\") :\r\n\t\t\t\t\t\t\t\t\t\t\t$th.find(\".a-IRR-headerLabel\");\r\n\t\t\t\tlet text = $($header.contents()[0]).text();\r\n\t\t\t\tif (text == firstGroupColumn) return false;\r\n\t\t\t\telse i++;\r\n\t\t\t});\r\n\t\t\tif (i > lastIndex) {\r\n\t\t\t\t$tr.append($(`<td colspan=\"${i-lastIndex}\"></td>`));\r\n\t\t\t\tlastIndex = i;\r\n\t\t\t}\r\n\t\t\tcolspan = thisGroup.columns.length;\r\n\t\t\tlastIndex = i+colspan;\r\n\t\t\t$tr.append($(`<td align=\"center\" colspan=\"${colspan}\">${thisGroup.group}</td>`));\r\n\t\t});\r\n\t\t$(`#${report.id} .t-fht-thead table`).prepend($tr.clone());\r\n\t}\r\n\r\n\treturn {\r\n\t\tinit\r\n\t}\r\n}();"],"file":"IRColumnsGroup.js"}